apply plugin: 'slice'

buildscript {
    repositories { maven { url 'https://repo.zeroc.com/nexus/content/repositories/releases' } }
    dependencies {
        classpath group: 'com.zeroc.gradle.ice-builder', name: 'slice', version: '1.0.5'
    }
}

slice {
    // window要么设置环境变量ICE_HOME，要么通过以下设置
    // iceHome = 'D:/ProgramFiles/ZeroC/Ice-3.6.1'
    output = file("src/main/slice-generated-src")
    java {
        args = "--impl --tie"
        include = [projectDir.path + "/src/main/slice"]
    }
}

sourceSets {
    main {
        java {
            // srcDir 'src/main/slice-generated-src'
            srcDirs = ['src/main/java', 'src/main/slice-generated-src']
        }

        resources {
            srcDirs = ['src/main/resources', 'src/main/slice']
        }
    }
}


dependencies {
    compile 'com.zeroc:icebox:3.6.1'
    compile 'com.zeroc:ice:3.6.1'
}
